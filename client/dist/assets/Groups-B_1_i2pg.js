const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ConfirmDeleteDialog-C7QMDLUM.js","assets/index-dRst-7iy.js","assets/DialogTitle-Bw4QftuY.js","assets/Modal-HVwfm5_O.js","assets/Menu-DXxMw8cN.js","assets/Typography-CDGuFNvf.js","assets/Button-ymTN7-ia.js","assets/AddMemberDialog-CH16vwiM.js","assets/UserItem-_aKwx2uN.js","assets/ListItem-B_Tvfpp0.js","assets/isMuiElement-Cx3b-8fr.js","assets/Avatar-CUFCW8-T.js","assets/IconButton-Cd5V1Ggt.js","assets/Delete-B6dPH1Zf.js","assets/Menu-Bx84lkot.js"])))=>i.map(i=>d[i]);
import{j as e,r as o,Q as _,aa as Y,m as Z,c as ee,u as se,ab as re,n as oe,ac as te,a4 as g,S as d,ad as ae,O as ne,ae as ie,af as ce,J as le,ag as de,ah as me}from"./index-dRst-7iy.js";import{A as pe}from"./AvatarCard-sxswjPhD.js";import{U as ue}from"./UserItem-_aKwx2uN.js";import{b as h,a as xe,D as ge,B as he,M as je}from"./Menu-Bx84lkot.js";import{c as f,T as x}from"./Typography-CDGuFNvf.js";import{C as fe}from"./CircularProgress-ZXwUfenP.js";import{B as y}from"./Modal-HVwfm5_O.js";import{I as u}from"./IconButton-Cd5V1Ggt.js";import{T as be}from"./Tooltip-Bi23DJI7.js";import{T as ve}from"./TextField-zR2u7fcs.js";import{B as S}from"./Button-ymTN7-ia.js";import{D as Me,A as De}from"./Delete-B6dPH1Zf.js";import"./Menu-DXxMw8cN.js";import"./Avatar-CUFCW8-T.js";import"./ListItem-B_Tvfpp0.js";import"./isMuiElement-Cx3b-8fr.js";const Ie=f(e.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done"),ke=f(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Ce=f(e.jsx("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace"),L=o.lazy(()=>_(()=>import("./ConfirmDeleteDialog-C7QMDLUM.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Ge=o.lazy(()=>_(()=>import("./AddMemberDialog-CH16vwiM.js"),__vite__mapDeps([7,1,8,9,4,3,10,11,5,12,13,14,2,6]))),Qe=()=>{var G,E;const s=Y()[0].get("group"),a=Z(),{isAddMember:c}=ee(r=>r.misc),n=se(),t=re(""),i=oe({chatId:s,populate:!0},{skip:!s}),[w,b]=h(ie),[A,B]=h(ce),[N,ye]=h(le),[z,v]=o.useState(!1),[R,m]=o.useState(!1),[M,p]=o.useState(""),[D,l]=o.useState(""),[T,I]=o.useState(!1),[H,k]=o.useState([]),F=[{isError:t.isError,error:t.error},{isError:i.isError,error:i.error}];xe(F),o.useEffect(()=>{const r=i.data;return r&&(p(r.chat.name),l(r.chat.name),k(r.chat.members)),()=>{p(""),l(""),k([]),m(!1)}},[i.data]);const O=()=>{a("/")},P=()=>{v(r=>!r)},U=()=>{v(!1)},V=()=>{m(!1),w("Updating Group Name...",{chatId:s,name:D})};o.useEffect(()=>{s?(p(`Group Name ${s}`),l(`Group Name ${s}`)):(p(""),l(""),m(!1))},[s]);const Q=()=>{n(me(!0))},$=()=>{I(!0)},C=()=>{I(!1)},K=()=>{N("Deleting Group....",s),C(),a("/group")},J=r=>{A("Removing Member...",{chatId:s,userId:r})},W=e.jsxs(e.Fragment,{children:[e.jsx(he,{sx:{display:{xs:"block",sm:"none",position:"fixed",right:"1rem",top:"1rem"}},children:e.jsx(u,{onClick:P,children:e.jsx(je,{})})}),e.jsx(be,{title:"back",children:e.jsx(u,{sx:{position:"absolute",top:"2rem",left:"2rem",bgcolor:de,color:"white",":hover":{bgcolor:"rgba(0,0,0,0.5)"}},onClick:O,children:e.jsx(Ce,{})})})]}),q=e.jsx(d,{direction:"row",alignItems:"center",justifyContent:"center",spacing:"1rem",padding:"3rem",children:R?e.jsxs(e.Fragment,{children:[e.jsx(ve,{value:D,onChange:r=>l(r.target.value)}),e.jsx(u,{onClick:V,disabled:b,children:e.jsx(Ie,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h4",children:M}),e.jsx(u,{disabled:b,onClick:()=>m(!0),children:e.jsx(ke,{})})]})}),X=e.jsxs(d,{direction:{sm:"row",xs:"column-reverse"},spacing:"1rem",p:{sm:"1rem",xs:"0",md:"1rem 4rem"},children:[e.jsx(S,{size:"large",color:"error",startIcon:e.jsx(Me,{}),onClick:$,children:"Delete Group"}),e.jsx(S,{size:"large",variant:"contained",startIcon:e.jsx(De,{}),onClick:Q,children:"Add Member"})]});return t.isLoading?e.jsx(te,{}):e.jsxs(g,{container:!0,height:"100vh",children:[e.jsx(g,{item:!0,sx:{display:{xs:"none",sm:"block"}},sm:4,children:e.jsx(j,{myGroups:(G=t==null?void 0:t.data)==null?void 0:G.groups,chatId:s})}),e.jsxs(g,{item:!0,xs:12,sm:8,sx:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",padding:"1rem 3rem"},children:[W,M&&e.jsxs(e.Fragment,{children:[q,e.jsx(x,{margin:"2rem",alignSelf:"flex-start",variant:"body1",children:"Members"}),e.jsx(d,{maxWidth:"45rem",width:"100%",boxSizing:"border-box",padding:{sm:"1rem",xs:"0",md:"1rem 4rem"},spacing:"2rem",height:"50vh",overflow:"auto",children:B?e.jsx(fe,{}):H.map(r=>e.jsx(ue,{user:r,isAdded:!0,styling:{boxShadow:"0 0 0.5rem rgba(0,0,0,0.2)",padding:"1rem 2rem",borderRadius:"1rem"},handler:J},r._id))}),X]})]}),c&&e.jsx(o.Suspense,{fallback:e.jsx(y,{open:!0}),children:e.jsx(Ge,{chatId:s})}),T&&e.jsx(o.Suspense,{fallback:e.jsx(y,{open:!0}),children:e.jsx(L,{open:L,handleClose:C,deleteHandler:K})}),e.jsxs(ge,{sx:{display:{xs:"block",sm:"none"}},open:z,onClose:U,children:[e.jsx(j,{w:"50vw"}),e.jsx(j,{w:"50vw",myGroups:(E=t==null?void 0:t.data)==null?void 0:E.groups,chatId:s})]})]})},j=({w:s="100%",myGroups:a=[],chatId:c})=>e.jsx(d,{spacing:2,sx:{padding:"1rem",backgroundImage:ae,height:"100vh",overflow:"auto"},width:s,children:a.length>0?a.map(n=>e.jsx(Ee,{group:n,chatId:c},n._id)):e.jsx(x,{textAlign:"center",padding:"1rem",children:"No Groups"})}),Ee=o.memo(({group:s,chatId:a})=>{const{name:c,avatar:n,_id:t}=s;return e.jsx(ne,{to:`?group=${t}`,onClick:i=>{a===t&&i.preventDefault()},children:e.jsxs(d,{direction:"row",spacing:"1rem",alignItems:"center",children:[e.jsx(pe,{avatar:n}),e.jsx(x,{children:c})]})})});export{Qe as default};

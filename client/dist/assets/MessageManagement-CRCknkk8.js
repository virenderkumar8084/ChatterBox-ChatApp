import{r as m,P as n,h as i,j as e,k as h,S as l,s as c}from"./index-dRst-7iy.js";import{A as p}from"./AdminLayout-Br9DIrjA.js";import{T as f}from"./Table-Dl_iMw3B.js";import{R as g}from"./RenderAttachment-DysiEhxC.js";import{c as u}from"./index-WJTt8NRO.js";import{a as w,B as N}from"./Menu-Bx84lkot.js";import{A as x}from"./Avatar-CUFCW8-T.js";import"./IconButton-Cd5V1Ggt.js";import"./Modal-HVwfm5_O.js";import"./Typography-CDGuFNvf.js";import"./ExitToApp-BindQh3z.js";import"./Container-YA2OyvgQ.js";import"./TextField-zR2u7fcs.js";import"./isMuiElement-Cx3b-8fr.js";import"./Menu-DXxMw8cN.js";import"./Tooltip-Bi23DJI7.js";import"./Toolbar-Ccpoply8.js";import"./MenuItem-DtIX8nYN.js";import"./Button-ymTN7-ia.js";import"./InputAdornment-DdfDQlMz.js";import"./CircularProgress-ZXwUfenP.js";const C=[{field:"id",headerName:"ID",headerClassName:"table-header",width:200},{field:"attachments",headerName:"Attachments",headerClassName:"table-header",width:200,renderCell:a=>{const{attachments:r}=a.row;return r.length>0?r.map(o=>{const t=o.url,d=h(t);return e.jsx(N,{children:e.jsx("a",{href:t,download:!0,target:"_blank",style:{color:"black"},children:g(d,t)})})}):"No Attachments"}},{field:"content",headerName:"Content",headerClassName:"table-header",width:400},{field:"sender",headerName:"Sent By",headerClassName:"table-header",width:200,renderCell:a=>e.jsxs(l,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(x,{alt:a.row.sender.name,src:a.row.sender.avatar}),e.jsx("span",{children:a.row.sender.name})]})},{field:"chat",headerName:"Chat",headerClassName:"table-header",width:220},{field:"groupChat",headerName:"Group Chat",headerClassName:"table-header",width:100},{field:"createdAt",headerName:"Time",headerClassName:"table-header",width:250}],$=()=>{const{loading:a,data:r,error:o}=u(`${c}/api/v1/admin/messages`,"dashboard-messages");w([{isError:o,error:o}]);const[t,d]=m.useState([]);return m.useEffect(()=>{r&&d(r.messages.map(s=>({...s,id:s._id,sender:{name:s.sender.name,avatar:n(s.sender.avatar,50)},createdAt:i(s.createdAt).format("MMMM Do YYYY, h:mm:ss a")})))},[r]),e.jsx(p,{children:a?e.jsx(Skeleton,{height:"100vh"}):e.jsx(f,{heading:"All Messages",columns:C,rows:t,rowHeight:200})})};export{$ as default};
